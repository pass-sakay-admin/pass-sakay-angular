<div class="passenger-page container">
  <div class="row pt-5">
    <div class="passenger-page-title col col-12">
      <div class="d-flex flex-row justify-content-between align-items-center">
        <h1 class="m-0 p-0">Passenger Profile</h1>
        <button
          class="m-0 p-0"
          mat-fab
          color="warn"
          aria-label="Edit Profile"
          (click)="editPassengerData()"
        >
          <mat-icon>{{ editMode ? "close" : "edit" }}</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <div class="row pt-5">
    <div
      class="passenger-profile-qr col col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 pb-5"
    >
      <div
        
        class="d-flex flex-column gap-3 justify-content-center align-items-center"
      >
        <div id="image-section" style="background-color: white;" class="px-2 py-2 flex flex-col gap-2">
          <div class="border border-dark rounded" id="image-section">
            <qrcode
              class="passenger-qr"
              [qrdata]="passengerQRData"
              [width]="250"
              [errorCorrectionLevel]="'M'"
              [allowEmptyString]="true"
            ></qrcode>
          </div>
          <span class="text-center fw-bold text-uppercase">
            {{ 
              passengerData.lastname + ', ' + 
              passengerData.firstname + ' ' + 
              passengerData.middlename 
            }}
          </span>
          <span class="text-center fw-light text-capitalize">
            {{ passengerData.currentAddress }}
          </span>
        </div>
        <button mat-raised-button color="primary" (click)="generateImage()">
          Download QR Code as Image
        </button>
      </div>
    </div>
    <div
      class="passenger-profile-form col col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 pb-5"
      [formGroup]="passengerDataFormGroup"
    >
      <div class="row pb-3">
        <div class="col col-12">
          <div class="form-group-name">BASIC INFORMATION</div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 pb-3">
          <div class="form-group">
            <label>Lastname</label>
            <input
              type="text"
              formControlName="lastname"
              class="form-control"
              aria-describedby="lastnameHelp"
              placeholder="Enter lastname"
            />
            <!-- <small id="lastnameHelp" class="form-text text-muted">
                We'll never share your email with anyone else.
            </small> -->
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 pb-3">
          <div class="form-group">
            <label>Firstname</label>
            <input
              type="text"
              class="form-control"
              formControlName="firstname"
              aria-describedby="firstnameHelp"
              placeholder="Enter firstname"
            />
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 pb-3">
          <div class="form-group">
            <label>Middlename</label>
            <input
              type="text"
              class="form-control"
              formControlName="middlename"
              aria-describedby="middlenameHelp"
              placeholder="Enter middlename"
            />
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 pb-3">
          <div class="form-group">
            <label>Gender</label>
            <div class="custom-radio d-flex flex-row gap-3 align-items-center">
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  formControlName="gender"
                  type="radio"
                  name="gender"
                  id="male"
                  value="Male"
                />
                <label class="form-check-label" for="male">Male</label>
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  formControlName="gender"
                  type="radio"
                  name="gender"
                  id="female"
                  value="Female"
                />
                <label class="form-check-label" for="female">Female</label>
              </div>
            </div>
            <!-- <input
                type="text"
                class="form-control pointer"
                formControlName="gender"
                placeholder="-- Choose a gender --"
                [ngbTypeahead]="autoCompleteGender"
                (focus)="focus$.next($any($event).target.value)"
                (click)="click$.next($any($event).target.value)"
                #typeAheadInstance="ngbTypeahead"
            /> -->
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 pb-3">
          <div class="form-group">
            <label>Birthdate</label>
            <div class="date-picker">
              <span (click)="datepicker.toggle()" *ngIf="editMode"></span>
              <input
                class="form-control"
                type="text"
                placeholder="-- Choose a date --"
                name="birthdate"
                formControlName="birthdate"
                ngbDatepicker
                #datepicker="ngbDatepicker"
                autocomplete="false"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="row pb-3">
        <div class="col col-12">
          <div class="form-group-name">CONTACTS AND ADDRESSES</div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 pb-3">
          <div class="form-group">
            <label>Active Phone Number</label>
            <input
              type="text"
              formControlName="phoneNumber"
              class="form-control"
              aria-describedby="phoneNumberHelp"
              placeholder="Enter Phone Number"
            />
            <!-- <small id="phoneNumberHelp" class="form-text text-muted">
                We'll never share your email with anyone else.
            </small> -->
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 pb-3">
          <div class="form-group">
            <label>Active Email Address</label>
            <input
              type="text"
              class="form-control"
              formControlName="emailAddress"
              aria-describedby="emailAddressHelp"
              placeholder="Enter Email Address"
            />
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pb-3">
          <div class="form-group">
            <label>Current Address</label>
            <input
              type="text"
              formControlName="currentAddress"
              class="form-control"
              aria-describedby="currentAddressHelp"
              placeholder="Enter Current Address"
            />
          </div>
        </div>
        <div class="col col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pb-3">
          <div class="form-group">
            <label>Home Address</label>
            <input
              type="text"
              class="form-control"
              formControlName="homeAddress"
              aria-describedby="homeAddressHelp"
              placeholder="Enter Home Address"
            />
          </div>
        </div>
      </div>

      <div class="row pb-3">
        <div class="col col-12">
          <div
            class="d-flex flex-row justify-content-end gap-3"
            *ngIf="editMode"
          >
            <button
              class="order-2"
              mat-flat-button
              color="primary"
              (click)="onSavePassengerData()"
            >
              Save
            </button>
            <button
              class="order-1"
              mat-stroked-button
              color="primary"
              (click)="editPassengerData()"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
